{"remainingRequest":"/home/ubuntu/4chatting/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js??ref--8-1!/home/ubuntu/4chatting/node_modules/videogular2/src/controls/vg-scrub-bar/vg-scrub-bar-cue-points/vg-scrub-bar-cue-points.js","dependencies":[{"path":"/home/ubuntu/4chatting/node_modules/videogular2/src/controls/vg-scrub-bar/vg-scrub-bar-cue-points/vg-scrub-bar-cue-points.js","mtime":1547199365000},{"path":"/home/ubuntu/4chatting/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/ubuntu/4chatting/node_modules/@angular-devkit/build-optimizer/src/build-optimizer/webpack-loader.js","mtime":1528256844000}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar core_1 = require(\"@angular/core\");\nvar vg_api_1 = require(\"../../../core/services/vg-api\");\nvar VgScrubBarCuePoints = /** @class */ /*@__PURE__*/ (function () {\n    function VgScrubBarCuePoints(ref, API) {\n        this.API = API;\n        this.onLoadedMetadataCalled = false;\n        this.cuePoints = [];\n        this.subscriptions = [];\n        this.totalCues = 0;\n        this.elem = ref.nativeElement;\n    }\n    VgScrubBarCuePoints.prototype.ngOnInit = function () {\n        var _this = this;\n        if (this.API.isPlayerReady) {\n            this.onPlayerReady();\n        }\n        else {\n            this.subscriptions.push(this.API.playerReadyEvent.subscribe(function () { return _this.onPlayerReady(); }));\n        }\n    };\n    VgScrubBarCuePoints.prototype.onPlayerReady = function () {\n        this.target = this.API.getMediaById(this.vgFor);\n        var onTimeUpdate = this.target.subscriptions.loadedMetadata;\n        this.subscriptions.push(onTimeUpdate.subscribe(this.onLoadedMetadata.bind(this)));\n        if (this.onLoadedMetadataCalled) {\n            this.onLoadedMetadata();\n        }\n    };\n    VgScrubBarCuePoints.prototype.onLoadedMetadata = function () {\n        if (this.vgCuePoints) {\n            // We need to transform the TextTrackCueList to Array or it doesn't work on IE11/Edge.\n            // See: https://github.com/videogular/videogular2/issues/369\n            this.cuePoints = [];\n            for (var i = 0, l = this.vgCuePoints.length; i < l; i++) {\n                var end = (this.vgCuePoints[i].endTime >= 0) ? this.vgCuePoints[i].endTime : this.vgCuePoints[i].startTime + 1;\n                var cuePointDuration = (end - this.vgCuePoints[i].startTime) * 1000;\n                var position = '0';\n                var percentWidth = '0';\n                if (typeof cuePointDuration === 'number' && this.target.time.total) {\n                    percentWidth = ((cuePointDuration * 100) / this.target.time.total) + \"%\";\n                    position = (this.vgCuePoints[i].startTime * 100 / (Math.round(this.target.time.total / 1000))) + \"%\";\n                }\n                this.vgCuePoints[i].$$style = {\n                    width: percentWidth,\n                    left: position\n                };\n                this.cuePoints.push(this.vgCuePoints[i]);\n            }\n        }\n    };\n    VgScrubBarCuePoints.prototype.updateCuePoints = function () {\n        if (!this.target) {\n            this.onLoadedMetadataCalled = true;\n            return;\n        }\n        this.onLoadedMetadata();\n    };\n    VgScrubBarCuePoints.prototype.ngOnChanges = function (changes) {\n        if (changes['vgCuePoints'].currentValue) {\n            this.updateCuePoints();\n        }\n    };\n    VgScrubBarCuePoints.prototype.ngDoCheck = function () {\n        if (this.vgCuePoints) {\n            var changes = this.totalCues !== this.vgCuePoints.length;\n            if (changes) {\n                this.totalCues = this.vgCuePoints.length;\n                this.updateCuePoints();\n            }\n        }\n    };\n    VgScrubBarCuePoints.prototype.ngOnDestroy = function () {\n        this.subscriptions.forEach(function (s) { return s.unsubscribe(); });\n    };\n    VgScrubBarCuePoints.decorators = [\n        { type: core_1.Component, args: [{\n                    selector: 'vg-scrub-bar-cue-points',\n                    encapsulation: core_1.ViewEncapsulation.None,\n                    template: \"\\n        <div class=\\\"cue-point-container\\\">\\n            <span *ngFor=\\\"let cp of cuePoints\\\" [style.width]=\\\"cp.$$style?.width\\\" [style.left]=\\\"cp.$$style?.left\\\"\\n                  class=\\\"cue-point\\\"></span>\\n        </div>\\n    \",\n                    styles: [\"\\n        vg-scrub-bar-cue-points {\\n            display: flex;\\n            width: 100%;\\n            height: 5px;\\n            pointer-events: none;\\n            position: absolute;\\n        }\\n\\n        vg-scrub-bar-cue-points .cue-point-container .cue-point {\\n            position: absolute;\\n            height: 5px;\\n            background-color: rgba(255, 204, 0, 0.7);\\n        }\\n\\n        vg-controls vg-scrub-bar-cue-points {\\n            position: absolute;\\n            top: calc(50% - 3px);\\n        }\\n    \"]\n                },] },\n    ];\n    VgScrubBarCuePoints.propDecorators = {\n        vgCuePoints: [{ type: core_1.Input }],\n        vgFor: [{ type: core_1.Input }]\n    };\n    return VgScrubBarCuePoints;\n}());\nexports.VgScrubBarCuePoints = VgScrubBarCuePoints;\n",null]}